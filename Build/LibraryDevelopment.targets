<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="15.0">
	<UsingTask TaskName="MSBuild.ExtensionPack.UI.Console" AssemblyFile="../packages/MSBuild.Extension.Pack.1.9.0/tools/net40/MSBuild.ExtensionPack.dll"/>
	<Import Project="LibraryDevelopment.properties" Condition="Exists('LibraryDevelopment.properties')"/>
	<Target Name="UpdateDevelopmentPropertiesFile">
		<Message Importance="high" Text="Please specify whether you would like to use locally-built or downloaded (default) artifacts for LCM, Palaso, and Chorus:"/>
		<MSBuild.ExtensionPack.UI.Console TaskAction="ReadLine" UserPrompt="Use artifacts from local libraries to build? (y/N)" ToUpper="true">
			<Output TaskParameter="UserResponse" PropertyName="UseLocalLibraries"/>
		</MSBuild.ExtensionPack.UI.Console>
		<MSBuild.ExtensionPack.UI.Console TaskAction="ReadLine" UserPrompt="What is the libpalaso output path?" Condition="'$(UseLocalLibraries)'=='Y'">
			<Output TaskParameter="UserResponse" PropertyName="PalasoArtifactsDir"/>
		</MSBuild.ExtensionPack.UI.Console>
		<MSBuild.ExtensionPack.UI.Console TaskAction="ReadLine" UserPrompt="What is the chorus output path?" Condition="'$(UseLocalLibraries)'=='Y'">
			<Output TaskParameter="UserResponse" PropertyName="ChorusArtifactsDir"/>
		</MSBuild.ExtensionPack.UI.Console>
		<MSBuild.ExtensionPack.UI.Console TaskAction="ReadLine" UserPrompt="What is the liblcm output path?" Condition="'$(UseLocalLibraries)'=='Y'">
			<Output TaskParameter="UserResponse" PropertyName="LcmArtifactsDir"/>
		</MSBuild.ExtensionPack.UI.Console>
		<WriteLinesToFile File="LibraryDevelopment.properties" Overwrite="true" Lines="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;!-- This file is generated by the UpdateDevelopmentPropertiesFile task --&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;Project xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot; ToolsVersion=&quot;4.0&quot;&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;PropertyGroup&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;UseLocalLibraries&gt;$(UseLocalLibraries)&lt;/UseLocalLibraries&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;PalasoArtifactsDir Condition=&quot;'%24(UseLocalLibraries)'=='Y'&quot;&gt;$(PalasoArtifactsDir)&lt;/PalasoArtifactsDir&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;ChorusArtifactsDir Condition=&quot;'%24(UseLocalLibraries)'=='Y'&quot;&gt;$(ChorusArtifactsDir)&lt;/ChorusArtifactsDir&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;LcmArtifactsDir Condition=&quot;'%24(UseLocalLibraries)'=='Y'&quot;&gt;$(LcmArtifactsDir)&lt;/LcmArtifactsDir&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;/PropertyGroup&gt;" />
		<WriteLinesToFile File="LibraryDevelopment.properties" Lines="&lt;/Project&gt;" />
	</Target>
	<Target Name="CheckDevelopmentPropertiesFile">
		<!-- Yellow text to catch the user's attention -->
		<Warning Text="LibraryDevelopment.properties file not found. Please specify which artifacts you would like to use:" Condition="!Exists('LibraryDevelopment.properties')" />
		<CallTarget Targets="UpdateDevelopmentPropertiesFile" Condition="!Exists('LibraryDevelopment.properties')" />
	</Target>
</Project>